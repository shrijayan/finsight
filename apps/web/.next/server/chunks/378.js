"use strict";exports.id=378,exports.ids=[378],exports.modules={20378:(e,s,a)=>{a.d(s,{p:()=>g});var l=a(73227),t=a(23677),r=a(32906),i=a(18755),d=a(11250),o=a(68333);let c=t.forwardRef(({className:e,value:s,...a},t)=>l.jsx(o.fC,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:l.jsx(o.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));c.displayName=o.fC.displayName;var n=a(83414),m=a(49092),p=a(93126),u=a(71692),f=a(28763),x=a(77587);let h={"application/pdf":[".pdf"],"text/csv":[".csv"],"text/plain":[".txt"]},j=10485760,N=5,g=t.forwardRef(({className:e,onUploadComplete:s,onError:a,maxFiles:o=N,maxSize:g=j,disabled:v=!1,...y},b)=>{let[w,F]=t.useState([]),[C,k]=t.useState(!1),[I,z]=t.useState([]),T=t.useCallback(e=>Object.keys(h).includes(e.type)?e.size>g?{filename:e.name,error:`File size ${(e.size/1048576).toFixed(2)}MB exceeds the ${g/1048576}MB limit.`,code:"FILE_TOO_LARGE"}:null:{filename:e.name,error:`File type ${e.type} is not supported. Please upload PDF, CSV, or TXT files only.`,code:"INVALID_TYPE"},[g]),$=t.useCallback(async e=>{let l=new FormData;l.append("files",e.file);try{F(s=>s.map(s=>s.id===e.id?{...s,status:"uploading",progress:0}:s));let a=await fetch("/api/uploads",{method:"POST",body:l});if(!a.ok){let e=await a.json();throw Error(e.error||"Upload failed")}let t=await a.json();F(s=>s.map(s=>s.id===e.id?{...s,status:"success",progress:100}:s)),s?.(t)}catch(l){let s=l instanceof Error?l.message:"Upload failed";F(a=>a.map(a=>a.id===e.id?{...a,status:"error",error:s}:a)),a?.(s)}},[s,a]),D=t.useCallback(async e=>{if(v)return;let s=[],l=[];for(let a of e){let e=T(a);e?s.push(e):l.push(a)}if(w.length+l.length>o){s.push({filename:"Multiple files",error:`Cannot upload more than ${o} files at once.`,code:"INVALID_FILE"}),z(s),a?.(s);return}if(s.length>0){z(s),a?.(s);return}z([]);let t=l.map(e=>({file:e,progress:0,status:"pending",id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}));for(let e of(F(e=>[...e,...t]),k(!0),t))await $(e);k(!1)},[v,T,w.length,o,a,$]),E=t.useCallback(e=>{D(e)},[D]),M=t.useCallback(e=>{let s=[],l=!1;e.forEach(({file:e,errors:a})=>{a.forEach(a=>{"file-invalid-type"===a.code?s.push({filename:e.name,error:`File type ${e.type} is not supported. Please upload PDF, CSV, or TXT files only.`,code:"INVALID_TYPE"}):"file-too-large"===a.code?s.push({filename:e.name,error:`File size ${(e.size/1048576).toFixed(2)}MB exceeds the ${g/1048576}MB limit.`,code:"FILE_TOO_LARGE"}):"too-many-files"!==a.code||l||(s.push({filename:"Multiple files",error:`Cannot upload more than ${o} files at once.`,code:"INVALID_FILE"}),l=!0)})}),s.length>0&&(z(s),a?.(s))},[g,o,a]),{getRootProps:S,getInputProps:L,isDragActive:_}=(0,r.uI)({onDrop:E,onDropRejected:M,accept:h,maxSize:g,maxFiles:o,disabled:v||C,multiple:!0}),P=t.useCallback(e=>{F(s=>s.filter(s=>s.id!==e))},[]),B=t.useCallback(()=>{F([]),z([])},[]),V=w.filter(e=>"success"===e.status).length,A=w.length>0,O=I.length>0||w.some(e=>"error"===e.status);return(0,l.jsxs)("div",{ref:b,className:(0,i.cn)("space-y-4",e),...y,children:[(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx(n._,{htmlFor:"file-upload",className:"text-sm font-medium",children:"Upload Bank Statements"}),(0,l.jsxs)("div",{...S(),className:(0,i.cn)("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors","hover:border-primary/50 hover:bg-primary/5",_&&"border-primary bg-primary/10",(v||C)&&"cursor-not-allowed opacity-50",O&&"border-destructive/50 bg-destructive/5"),role:"button",tabIndex:0,"aria-describedby":"file-upload-description",children:[l.jsx("input",{...L(),id:"file-upload"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[l.jsx(m.Z,{className:"h-12 w-12 text-muted-foreground"}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-lg font-medium",children:_?"Drop files here":"Drag & drop files here"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"or click to browse files"})]}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsx("p",{children:"Supports: PDF, CSV, TXT files"}),(0,l.jsxs)("p",{children:["Max size: ",g/1048576,"MB per file, up to ",o," files"]})]})]})]}),(0,l.jsxs)("p",{id:"file-upload-description",className:"sr-only",children:["Upload your bank statement files. Supported formats are PDF, CSV, and TXT. Maximum file size is ",g/1048576,"MB and you can upload up to ",o," files."]})]}),O&&l.jsx("div",{className:"space-y-2",children:I.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-start gap-2 p-3 border border-destructive/20 bg-destructive/5 rounded-md",children:[l.jsx(p.Z,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{className:"flex-1 text-sm",children:[l.jsx("p",{className:"font-medium text-destructive",children:e.filename}),l.jsx("p",{className:"text-destructive/80",children:e.error})]})]},s))}),A&&(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("h4",{className:"text-sm font-medium",children:["Files (",V,"/",w.length," uploaded)"]}),!C&&l.jsx(d.z,{variant:"ghost",size:"sm",onClick:B,className:"h-6 px-2 text-xs",children:"Clear all"})]}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:w.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-card",children:[l.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:e.file.name}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:["success"===e.status&&l.jsx(f.Z,{className:"h-4 w-4 text-green-600"}),"error"===e.status&&l.jsx(p.Z,{className:"h-4 w-4 text-destructive"}),!C&&l.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>P(e.id),className:"h-6 w-6 p-0","aria-label":`Remove ${e.file.name}`,children:l.jsx(x.Z,{className:"h-3 w-3"})})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.file.size/1048576).toFixed(2)," MB"]}),"uploading"===e.status&&l.jsx("div",{className:"flex-1",children:l.jsx(c,{value:e.progress,className:"h-1"})}),e.error&&l.jsx("p",{className:"text-xs text-destructive",children:e.error})]})]})]},e.id))})]})]})});g.displayName="FileUpload"},83414:(e,s,a)=>{a.d(s,{_:()=>c});var l=a(73227),t=a(23677),r=a(38063),i=a(31086),d=a(18755);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef(({className:e,...s},a)=>l.jsx(r.f,{ref:a,className:(0,d.cn)(o(),e),...s}));c.displayName=r.f.displayName}};