(()=>{var e={};e.id=40,e.ids=[40],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},35034:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},45797:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(19261),a(69076),a(87824),a(74501);var t=a(93282),r=a(5736),l=a(93906),i=a.n(l),n=a(36880),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let o=["",{children:["(app)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,19261)),"/Users/shrijayan.rajendran/projects/personal/bank_statement/apps/web/src/app/(app)/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,69076)),"/Users/shrijayan.rajendran/projects/personal/bank_statement/apps/web/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,87824,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,74501)),"/Users/shrijayan.rajendran/projects/personal/bank_statement/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,87824,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/shrijayan.rajendran/projects/personal/bank_statement/apps/web/src/app/(app)/dashboard/page.tsx"],p="/(app)/dashboard/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},521:(e,s,a)=>{Promise.resolve().then(a.bind(a,62407))},62407:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(73227),r=a(23677),l=a.n(r),i=a(20378),n=a(11250),d=a(79580),o=a(74431),c=a(24583);let p=(0,c.Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),u=(0,c.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var x=a(12198),m=a(49092),h=a(71692),j=a(20649),f=a(9925);function y(){let{data:e}=(0,f.useSession)(),[s,a]=l().useState(null),[r,c]=l().useState(0),[y,g]=l().useState("idle"),[b,N]=l().useState(!1),[v,w]=l().useState([]);l().useCallback(async s=>{if(e?.user?.email)try{let e=await fetch("/api/uploads/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uploadId:s.uploadId,fileReferences:s.fileReferences})});if(e.ok){let s=await e.json();k(s.analysisId)}else g("failed")}catch(e){console.error("Failed to connect upload to user:",e),g("failed")}},[e?.user?.email]);let k=l().useCallback(e=>{let s=setInterval(async()=>{try{let a=await fetch(`/api/analysis/status/${e}`);if(a.ok){let e=await a.json();c(e.progress||0),"completed"===e.status?(g("completed"),clearInterval(s)):"failed"===e.status&&(g("failed"),clearInterval(s))}}catch(e){console.error("Failed to poll analysis progress:",e)}},2e3);setTimeout(()=>clearInterval(s),3e5)},[]),P=l().useCallback(async s=>{if(console.log("Upload completed:",s),s.fileReferences.forEach((e,a)=>{w(e=>[...e,{id:`${s.uploadId}-${a}`,filename:`File ${a+1}`,uploadedAt:new Date,status:"processing"}])}),N(!1),e?.user?.email){g("processing"),c(0);try{let e=await fetch("/api/uploads/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uploadId:s.uploadId,fileReferences:s.fileReferences})});if(e.ok){let s=await e.json();console.log("Analysis started with ID:",s.analysisId),k(s.analysisId)}else console.error("Failed to start analysis"),g("failed")}catch(e){console.error("Failed to trigger analysis:",e),g("failed")}}},[e?.user?.email,k]),S=l().useCallback(e=>{console.error("Upload error:",e)},[]),Z=l().useCallback(()=>{N(!0)},[]);return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),t.jsx("p",{className:"text-muted-foreground",children:"processing"===y?"Analyzing your uploaded documents...":"completed"===y?"Your analysis is ready!":"Upload your bank statements to get started with AI-powered analysis"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:["completed"===y&&(0,t.jsxs)(n.z,{onClick:Z,className:"flex items-center gap-2",children:[t.jsx(o.Z,{className:"h-4 w-4"}),"Upload More Files"]}),t.jsx(j.default,{href:"/dashboard/history",children:(0,t.jsxs)(n.z,{variant:"outline",className:"flex items-center gap-2",children:[t.jsx(p,{className:"h-4 w-4"}),"View Report History"]})})]})]}),"processing"===y&&(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(u,{className:"h-5 w-5"}),"Analyzing Your Documents"]}),t.jsx(d.SZ,{children:s?`Processing ${s.fileReferences.length} uploaded file(s) from ${new Date(s.uploadedAt).toLocaleString()}`:"Processing your uploaded documents with AI analysis..."})]}),t.jsx(d.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:t.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${r}%`}})}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[r,"% complete - This usually takes 1-2 minutes"]})]})})]}),"completed"===y&&(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(x.Z,{className:"h-5 w-5 text-green-600"}),"Analysis Complete!"]}),t.jsx(d.SZ,{children:"Your financial analysis is ready. View your detailed insights and reports."})]}),t.jsx(d.aY,{children:(0,t.jsxs)("div",{className:"flex gap-4",children:[t.jsx(j.default,{href:"/dashboard/history",children:t.jsx(n.z,{children:"View Analysis Report"})}),t.jsx(n.z,{variant:"outline",onClick:Z,children:"Upload More Files"})]})})]}),"failed"===y&&(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded-full h-5 w-5 bg-red-600"}),"Analysis Failed"]}),t.jsx(d.SZ,{children:"There was an issue processing your documents. Please try uploading again."})]}),t.jsx(d.aY,{children:t.jsx(n.z,{onClick:()=>N(!0),children:"Try Again"})})]}),(b||"idle"===y&&!s)&&(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(m.Z,{className:"h-5 w-5"}),"completed"===y?"Upload Additional Documents":"Upload Bank Statements"]}),t.jsx(d.SZ,{children:"Upload your PDF, CSV, or TXT bank statement files for analysis. Our AI will automatically categorize transactions and provide insights."})]}),t.jsx(d.aY,{children:t.jsx(i.p,{onUploadComplete:P,onError:S,className:"w-full"})})]}),v.length>0&&(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(u,{className:"h-5 w-5"}),"Recent Uploads"]}),t.jsx(d.SZ,{children:"Track the status of your recent file uploads and analysis progress"})]}),t.jsx(d.aY,{children:t.jsx("div",{className:"space-y-3",children:v.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.filename}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Uploaded ",e.uploadedAt.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["processing"===e.status&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Processing"]}),"completed"===e.status&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[t.jsx(x.Z,{className:"h-3 w-3"}),"Completed"]}),"failed"===e.status&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[t.jsx("div",{className:"rounded-full h-3 w-3 bg-red-600"}),"Failed"]})]})]},e.id))})})]}),"idle"===y&&!s&&0===v.length&&!b&&(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[t.jsx(d.ll,{children:"Getting Started"}),t.jsx(d.SZ,{children:"New to Bank Statement Analyzer? Here's how to get the most out of your analysis:"})]}),t.jsx(d.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:t.jsx(m.Z,{className:"h-4 w-4 text-primary"})}),t.jsx("h3",{className:"font-semibold",children:"1. Upload Files"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your bank statements in PDF, CSV, or TXT format"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:t.jsx("div",{className:"h-4 w-4 rounded-full bg-primary animate-pulse"})}),t.jsx("h3",{className:"font-semibold",children:"2. AI Analysis"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Our AI automatically categorizes and analyzes your transactions"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:t.jsx(h.Z,{className:"h-4 w-4 text-primary"})}),t.jsx("h3",{className:"font-semibold",children:"3. View Reports"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Get detailed insights and downloadable reports"})]})]})})]})]})}},12198:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(24583).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},74431:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(24583).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},19261:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var t=a(53189);let r=(0,t.createProxy)(String.raw`/Users/shrijayan.rajendran/projects/personal/bank_statement/apps/web/src/app/(app)/dashboard/page.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,t.createProxy)(String.raw`/Users/shrijayan.rajendran/projects/personal/bank_statement/apps/web/src/app/(app)/dashboard/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[522,295,992,778,74,332,641,378],()=>a(45797));module.exports=t})();