"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{32195:function(e,s,t){t.d(s,{p:function(){return g}});var r=t(27573),a=t(7653),l=t(47449),i=t(33495),n=t(23005),o=t(7385);let d=a.forwardRef((e,s)=>{let{className:t,value:a,...l}=e;return(0,r.jsx)(o.fC,{ref:s,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,r.jsx)(o.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});d.displayName=o.fC.displayName;var c=t(44669),u=t(32937),m=t(68560),f=t(77631),p=t(13173),x=t(95623);let h={"application/pdf":[".pdf"],"text/csv":[".csv"],"text/plain":[".txt"]},g=a.forwardRef((e,s)=>{let{className:t,onUploadComplete:o,onError:g,maxFiles:v=5,maxSize:b=10485760,disabled:y=!1,...N}=e,[j,w]=a.useState([]),[k,C]=a.useState(!1),[F,z]=a.useState([]),E=a.useCallback(e=>Object.keys(h).includes(e.type)?e.size>b?{filename:e.name,error:"File size ".concat((e.size/1048576).toFixed(2),"MB exceeds the ").concat(b/1048576,"MB limit."),code:"FILE_TOO_LARGE"}:null:{filename:e.name,error:"File type ".concat(e.type," is not supported. Please upload PDF, CSV, or TXT files only."),code:"INVALID_TYPE"},[b]),I=a.useCallback(async e=>{let s=new FormData;s.append("files",e.file);try{w(s=>s.map(s=>s.id===e.id?{...s,status:"uploading",progress:0}:s));let t=await fetch("/api/uploads",{method:"POST",body:s});if(!t.ok){let e=await t.json();throw Error(e.error||"Upload failed")}let r=await t.json();w(s=>s.map(s=>s.id===e.id?{...s,status:"success",progress:100}:s)),null==o||o(r)}catch(t){let s=t instanceof Error?t.message:"Upload failed";w(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:s}:t)),null==g||g(s)}},[o,g]),_=a.useCallback(async e=>{if(y)return;let s=[],t=[];for(let r of e){let e=E(r);e?s.push(e):t.push(r)}if(j.length+t.length>v){s.push({filename:"Multiple files",error:"Cannot upload more than ".concat(v," files at once."),code:"INVALID_FILE"}),z(s),null==g||g(s);return}if(s.length>0){z(s),null==g||g(s);return}z([]);let r=t.map(e=>({file:e,progress:0,status:"pending",id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}));for(let e of(w(e=>[...e,...r]),C(!0),r))await I(e);C(!1)},[y,E,j.length,v,g,I]),T=a.useCallback(e=>{_(e)},[_]),D=a.useCallback(e=>{let s=[],t=!1;e.forEach(e=>{let{file:r,errors:a}=e;a.forEach(e=>{"file-invalid-type"===e.code?s.push({filename:r.name,error:"File type ".concat(r.type," is not supported. Please upload PDF, CSV, or TXT files only."),code:"INVALID_TYPE"}):"file-too-large"===e.code?s.push({filename:r.name,error:"File size ".concat((r.size/1048576).toFixed(2),"MB exceeds the ").concat(b/1048576,"MB limit."),code:"FILE_TOO_LARGE"}):"too-many-files"!==e.code||t||(s.push({filename:"Multiple files",error:"Cannot upload more than ".concat(v," files at once."),code:"INVALID_FILE"}),t=!0)})}),s.length>0&&(z(s),null==g||g(s))},[b,v,g]),{getRootProps:M,getInputProps:S,isDragActive:L}=(0,l.uI)({onDrop:T,onDropRejected:D,accept:h,maxSize:b,maxFiles:v,disabled:y||k,multiple:!0}),B=a.useCallback(e=>{w(s=>s.filter(s=>s.id!==e))},[]),P=a.useCallback(()=>{w([]),z([])},[]),V=j.filter(e=>"success"===e.status).length,A=j.length>0,R=F.length>0||j.some(e=>"error"===e.status);return(0,r.jsxs)("div",{ref:s,className:(0,i.cn)("space-y-4",t),...N,children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"file-upload",className:"text-sm font-medium",children:"Upload Bank Statements"}),(0,r.jsxs)("div",{...M(),className:(0,i.cn)("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors","hover:border-primary/50 hover:bg-primary/5",L&&"border-primary bg-primary/10",(y||k)&&"cursor-not-allowed opacity-50",R&&"border-destructive/50 bg-destructive/5"),role:"button",tabIndex:0,"aria-describedby":"file-upload-description",children:[(0,r.jsx)("input",{...S(),id:"file-upload"}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)(u.Z,{className:"h-12 w-12 text-muted-foreground"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:L?"Drop files here":"Drag & drop files here"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"or click to browse files"})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,r.jsx)("p",{children:"Supports: PDF, CSV, TXT files"}),(0,r.jsxs)("p",{children:["Max size: ",b/1048576,"MB per file, up to ",v," files"]})]})]})]}),(0,r.jsxs)("p",{id:"file-upload-description",className:"sr-only",children:["Upload your bank statement files. Supported formats are PDF, CSV, and TXT. Maximum file size is ",b/1048576,"MB and you can upload up to ",v," files."]})]}),R&&(0,r.jsx)("div",{className:"space-y-2",children:F.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-start gap-2 p-3 border border-destructive/20 bg-destructive/5 rounded-md",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-destructive",children:e.filename}),(0,r.jsx)("p",{className:"text-destructive/80",children:e.error})]})]},s))}),A&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h4",{className:"text-sm font-medium",children:["Files (",V,"/",j.length," uploaded)"]}),!k&&(0,r.jsx)(n.z,{variant:"ghost",size:"sm",onClick:P,className:"h-6 px-2 text-xs",children:"Clear all"})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:j.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-card",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium truncate",children:e.file.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["success"===e.status&&(0,r.jsx)(p.Z,{className:"h-4 w-4 text-green-600"}),"error"===e.status&&(0,r.jsx)(m.Z,{className:"h-4 w-4 text-destructive"}),!k&&(0,r.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>B(e.id),className:"h-6 w-6 p-0","aria-label":"Remove ".concat(e.file.name),children:(0,r.jsx)(x.Z,{className:"h-3 w-3"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.file.size/1048576).toFixed(2)," MB"]}),"uploading"===e.status&&(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(d,{value:e.progress,className:"h-1"})}),e.error&&(0,r.jsx)("p",{className:"text-xs text-destructive",children:e.error})]})]})]},e.id))})]})]})});g.displayName="FileUpload"},23005:function(e,s,t){t.d(s,{z:function(){return d}});var r=t(27573),a=t(7653),l=t(91028),i=t(65517),n=t(33495);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,r.jsx)(u,{className:(0,n.cn)(o({variant:a,size:i,className:t})),ref:s,...c})});d.displayName="Button"},44669:function(e,s,t){t.d(s,{_:function(){return d}});var r=t(27573),a=t(7653),l=t(26202),i=t(65517),n=t(33495);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.f,{ref:s,className:(0,n.cn)(o(),t),...a})});d.displayName=l.f.displayName},33495:function(e,s,t){t.d(s,{cn:function(){return l}});var r=t(57908),a=t(66290);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}}]);